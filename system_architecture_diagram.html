<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤šæ¨¡æ€æ°´å°å·¥å…· - ç³»ç»Ÿæ¶æ„å›¾</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
            font-size: 28px;
        }
        .description {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 30px 0;
            border-left: 4px solid #007bff;
        }
        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        .feature-card {
            background-color: #ffffff;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #dee2e6;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .feature-card h3 {
            color: #495057;
            margin-top: 0;
            border-bottom: 2px solid #007bff;
            padding-bottom: 10px;
        }
        .feature-card ul {
            list-style-type: none;
            padding: 0;
        }
        .feature-card li {
            padding: 5px 0;
            border-bottom: 1px solid #f1f3f4;
        }
        .feature-card li:before {
            content: "â–¶ ";
            color: #007bff;
            font-weight: bold;
        }
        #mermaid-diagram {
            text-align: center;
            margin: 30px 0;
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
        }
        .performance-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background-color: white;
        }
        .performance-table th,
        .performance-table td {
            border: 1px solid #dee2e6;
            padding: 12px;
            text-align: left;
        }
        .performance-table th {
            background-color: #007bff;
            color: white;
            font-weight: bold;
        }
        .performance-table tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        .legend {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 5px;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 14px;
        }
        .legend-user { background-color: #e1f5fe; border: 2px solid #01579b; }
        .legend-engine { background-color: #f3e5f5; border: 2px solid #4a148c; }
        .legend-algorithm { background-color: #e8f5e8; border: 2px solid #1b5e20; }
        .legend-config { background-color: #fff3e0; border: 2px solid #e65100; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¯ å¤šæ¨¡æ€æ°´å°å·¥å…· - ç³»ç»Ÿæ¶æ„å›¾</h1>
        
        <div class="description">
            <h2>ğŸ“‹ ç³»ç»Ÿæ¦‚è§ˆ</h2>
            <p>è¿™æ˜¯ä¸€ä¸ªç»Ÿä¸€çš„å¤šæ¨¡æ€æ°´å°å·¥å…·ï¼Œæ”¯æŒ<strong>æ–‡æœ¬ã€å›¾åƒã€éŸ³é¢‘ã€è§†é¢‘</strong>å››ç§æ¨¡æ€çš„æ°´å°åŠŸèƒ½ã€‚é‡‡ç”¨åˆ†å±‚æ¶æ„è®¾è®¡ï¼Œé€šè¿‡ç»Ÿä¸€APIæ¥å£æä¾›æœåŠ¡ï¼Œæ”¯æŒç¦»çº¿ä¼˜å…ˆçš„æ¨¡å‹åŠ è½½å’Œå¤šç§ç²¾åº¦æ¨¡å¼ã€‚</p>
        </div>

        <div class="legend">
            <div class="legend-item legend-user">ğŸ–¥ï¸ ç”¨æˆ·æ¥å£å±‚</div>
            <div class="legend-item legend-engine">âš™ï¸ ç»Ÿä¸€å¼•æ“å±‚</div>
            <div class="legend-item legend-algorithm">ğŸ”§ ç®—æ³•å®ç°å±‚</div>
            <div class="legend-item legend-config">ğŸ“ é…ç½®å·¥å…·å±‚</div>
        </div>

        <div id="mermaid-diagram">
            <div class="mermaid">
graph TB
    %% ç”¨æˆ·æ¥å£å±‚
    subgraph "ğŸ–¥ï¸ ç”¨æˆ·æ¥å£å±‚ (User Interface Layer)"
        WEB[Webç•Œé¢<br/>Flask App<br/>templates/index.html]
        API[REST API<br/>app.py<br/>/api/embed, /api/extract]
        CLI[å‘½ä»¤è¡Œæ¥å£<br/>Python Scripts]
    end

    %% ç»Ÿä¸€å¼•æ“å±‚
    subgraph "âš™ï¸ ç»Ÿä¸€å¼•æ“å±‚ (Unified Engine Layer)"
        TOOL[WatermarkTool<br/>ç»Ÿä¸€é—¨é¢<br/>watermark_tool.py]
        ENGINE[UnifiedWatermarkEngine<br/>å¤šæ¨¡æ€è·¯ç”±<br/>unified_engine.py]
    end

    %% ç®—æ³•å®ç°å±‚
    subgraph "ğŸ”§ ç®—æ³•å®ç°å±‚ (Algorithm Implementation Layer)"
        subgraph "ğŸ“ æ–‡æœ¬æ°´å°"
            TEXT[CredIDWatermark<br/>credid_watermark.py]
            CREDID[CredID Framework<br/>å¤šæ–¹æ°´å°ç®—æ³•]
        end
        
        subgraph "ğŸ–¼ï¸ å›¾åƒæ°´å°"
            IMG[ImageWatermark<br/>image_watermark.py]
            PRC[PRC-Watermark<br/>åŸºäºæ‰©æ•£æ¨¡å‹]
            VS_IMG[VideoSeal Image<br/>å•å¸§è§†é¢‘å¤„ç†]
        end
        
        subgraph "ğŸµ éŸ³é¢‘æ°´å°"
            AUDIO[AudioWatermark<br/>audio_watermark.py]
            AS[AudioSeal<br/>æ·±åº¦å­¦ä¹ éŸ³é¢‘æ°´å°]
            BARK[Bark TTS<br/>æ–‡æœ¬è½¬è¯­éŸ³]
        end
        
        subgraph "ğŸ¬ è§†é¢‘æ°´å°"
            VIDEO[VideoWatermark<br/>video_watermark.py]
            HY[HunyuanVideo<br/>æ–‡ç”Ÿè§†é¢‘]
            VS[VideoSeal<br/>è§†é¢‘æ°´å°ç®—æ³•]
        end
    end

    %% é…ç½®å’Œå·¥å…·å±‚
    subgraph "ğŸ“ é…ç½®å’Œå·¥å…·å±‚ (Configuration & Utility Layer)"
        CONFIG[é…ç½®ç®¡ç†<br/>config/*.yaml]
        MODEL_MGR[æ¨¡å‹ç®¡ç†<br/>ç¦»çº¿ä¼˜å…ˆåŠ è½½]
        CACHE[æ¨¡å‹ç¼“å­˜<br/>æœ¬åœ°HFæ¨¡å‹]
    end

    %% è¿æ¥å…³ç³»
    WEB --> TOOL
    API --> TOOL
    CLI --> TOOL
    
    TOOL --> ENGINE
    
    ENGINE --> TEXT
    ENGINE --> IMG
    ENGINE --> AUDIO
    ENGINE --> VIDEO
    
    TEXT --> CREDID
    IMG --> PRC
    IMG --> VS_IMG
    AUDIO --> AS
    AUDIO --> BARK
    VIDEO --> HY
    VIDEO --> VS
    
    MODEL_MGR --> CACHE
    CONFIG --> ENGINE
    MODEL_MGR --> ENGINE

    %% æ ·å¼
    classDef userLayer fill:#e1f5fe,stroke:#01579b,stroke-width:2px
    classDef engineLayer fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    classDef algorithmLayer fill:#e8f5e8,stroke:#1b5e20,stroke-width:2px
    classDef configLayer fill:#fff3e0,stroke:#e65100,stroke-width:2px
    
    class WEB,API,CLI userLayer
    class TOOL,ENGINE engineLayer
    class TEXT,IMG,AUDIO,VIDEO,CREDID,PRC,VS_IMG,AS,BARK,HY,VS algorithmLayer
    class CONFIG,MODEL_MGR,CACHE configLayer
            </div>
        </div>

        <div class="features">
            <div class="feature-card">
                <h3>ğŸ–¥ï¸ ç”¨æˆ·æ¥å£å±‚ç‰¹æ€§</h3>
                <ul>
                    <li>ç°ä»£åŒ–Webç•Œé¢ï¼Œæ”¯æŒæ‹–æ‹½ä¸Šä¼ </li>
                    <li>RESTful APIï¼Œä¾¿äºé›†æˆ</li>
                    <li>å‘½ä»¤è¡Œæ¥å£ï¼Œé€‚åˆå¼€å‘æµ‹è¯•</li>
                    <li>å®æ—¶è¿›åº¦åé¦ˆå’Œé”™è¯¯å¤„ç†</li>
                </ul>
            </div>
            
            <div class="feature-card">
                <h3>âš™ï¸ ç»Ÿä¸€å¼•æ“å±‚ç‰¹æ€§</h3>
                <ul>
                    <li>ç»Ÿä¸€APIï¼šembed/extractæ¥å£</li>
                    <li>æ™ºèƒ½è·¯ç”±ï¼šè‡ªåŠ¨é€‰æ‹©ç®—æ³•</li>
                    <li>æ‡’åŠ è½½ï¼šæŒ‰éœ€åˆå§‹åŒ–æ¨¡å‹</li>
                    <li>é…ç½®é©±åŠ¨ï¼šYAMLé…ç½®ç®¡ç†</li>
                </ul>
            </div>
            
            <div class="feature-card">
                <h3>ğŸ”§ ç®—æ³•å®ç°å±‚ç‰¹æ€§</h3>
                <ul>
                    <li>æ–‡æœ¬ï¼šCredIDå¤šæ–¹æ°´å°æ¡†æ¶</li>
                    <li>å›¾åƒï¼šPRC+VideoSealåŒåç«¯</li>
                    <li>éŸ³é¢‘ï¼šAudioSeal+Bark TTS</li>
                    <li>è§†é¢‘ï¼šHunyuanVideo+VideoSeal</li>
                </ul>
            </div>
            
            <div class="feature-card">
                <h3>ğŸ“ é…ç½®å·¥å…·å±‚ç‰¹æ€§</h3>
                <ul>
                    <li>ç¦»çº¿ä¼˜å…ˆçš„æ¨¡å‹åŠ è½½</li>
                    <li>æ™ºèƒ½ç¼“å­˜ç®¡ç†ç³»ç»Ÿ</li>
                    <li>YAMLé©±åŠ¨çš„é…ç½®ç³»ç»Ÿ</li>
                    <li>ç»Ÿä¸€çš„å·¥å…·å‡½æ•°åº“</li>
                </ul>
            </div>
        </div>

        <div class="description">
            <h2>ğŸš€ æ€§èƒ½æŒ‡æ ‡</h2>
            <table class="performance-table">
                <thead>
                    <tr>
                        <th>æ¨¡æ€</th>
                        <th>ç®—æ³•</th>
                        <th>æ£€æµ‹æˆåŠŸç‡</th>
                        <th>å¤„ç†æ—¶é—´</th>
                        <th>è´¨é‡æŒ‡æ ‡</th>
                        <th>ç‰¹è‰²åŠŸèƒ½</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>ğŸ“ æ–‡æœ¬</td>
                        <td>CredID</td>
                        <td>é«˜</td>
                        <td>å¿«é€Ÿ</td>
                        <td>ä¿æŒæ–‡æœ¬è´¨é‡</td>
                        <td>å¤šæ–¹æ°´å°ï¼Œå€™é€‰ä¼˜åŒ–</td>
                    </tr>
                    <tr>
                        <td>ğŸ–¼ï¸ å›¾åƒ</td>
                        <td>PRC/VideoSeal</td>
                        <td>100%</td>
                        <td>0.19s-52s</td>
                        <td>é«˜è´¨é‡ç”Ÿæˆ</td>
                        <td>ä¸‰ç§ç²¾åº¦æ¨¡å¼</td>
                    </tr>
                    <tr>
                        <td>ğŸµ éŸ³é¢‘</td>
                        <td>AudioSeal</td>
                        <td>100%</td>
                        <td>0.93såµŒå…¥/0.04sæå–</td>
                        <td>SNR > 44dB</td>
                        <td>TTSé›†æˆï¼Œæ‰¹å¤„ç†</td>
                    </tr>
                    <tr>
                        <td>ğŸ¬ è§†é¢‘</td>
                        <td>HunyuanVideo+VideoSeal</td>
                        <td>é«˜</td>
                        <td>çº¦3ç§’ç”Ÿæˆ</td>
                        <td>320x512åˆ†è¾¨ç‡</td>
                        <td>æ–‡ç”Ÿè§†é¢‘+æ°´å°</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="description">
            <h2>ğŸ¯ æ ¸å¿ƒä¼˜åŠ¿</h2>
            <ul style="list-style-type: none; padding: 0;">
                <li style="padding: 10px 0; border-bottom: 1px solid #eee;"><strong>ğŸ”„ ç»Ÿä¸€æ¥å£ï¼š</strong>å››ç§æ¨¡æ€ä½¿ç”¨ç›¸åŒçš„APIè°ƒç”¨æ–¹å¼</li>
                <li style="padding: 10px 0; border-bottom: 1px solid #eee;"><strong>ğŸ“± ç¦»çº¿ä¼˜å…ˆï¼š</strong>æ”¯æŒæœ¬åœ°æ¨¡å‹ç¼“å­˜ï¼Œå‡å°‘ç½‘ç»œä¾èµ–</li>
                <li style="padding: 10px 0; border-bottom: 1px solid #eee;"><strong>ğŸ›ï¸ å¤šç²¾åº¦æ”¯æŒï¼š</strong>æ ¹æ®éœ€æ±‚é€‰æ‹©é€Ÿåº¦å’Œç²¾åº¦çš„å¹³è¡¡</li>
                <li style="padding: 10px 0; border-bottom: 1px solid #eee;"><strong>ğŸ”§ æ˜“äºæ‰©å±•ï¼š</strong>æ¨¡å—åŒ–è®¾è®¡ï¼Œä¾¿äºæ·»åŠ æ–°ç®—æ³•</li>
                <li style="padding: 10px 0;"><strong>ğŸ“Š ç”Ÿäº§å°±ç»ªï¼š</strong>å®Œæ•´çš„é”™è¯¯å¤„ç†å’Œæ€§èƒ½ç›‘æ§</li>
            </ul>
        </div>
    </div>

    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true,
                curve: 'linear'
            }
        });
    </script>
</body>
</html>